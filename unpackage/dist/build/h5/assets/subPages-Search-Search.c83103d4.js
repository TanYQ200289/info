import{C as e,D as t,E as a,X as o,r as l,o as s,c,w as r,a as n,G as i,b as u,t as h,H as d,m as p,p as f,K as y,e as m,i as g,J as _,z as b,h as k,Y as C,T as S,j as w,k as x,F as I,U as v,Z as $,n as A}from"./index.37bf5aad.js";import{_ as B}from"./u-icon.f076fea3.js";import{r as j}from"./uni-app.es.d259472c.js";import{_ as z}from"./plugin-vue_export-helper.21dcd24c.js";import{_ as V}from"./uni-icons.a5cd0d6a.js";var N=z({name:"u-search",mixins:[t,a,{props:{shape:{type:String,default:e.search.shape},bgColor:{type:String,default:e.search.bgColor},placeholder:{type:String,default:e.search.placeholder},clearabled:{type:Boolean,default:e.search.clearabled},focus:{type:Boolean,default:e.search.focus},showAction:{type:Boolean,default:e.search.showAction},actionStyle:{type:Object,default:e.search.actionStyle},actionText:{type:String,default:e.search.actionText},inputAlign:{type:String,default:e.search.inputAlign},inputStyle:{type:Object,default:e.search.inputStyle},disabled:{type:Boolean,default:e.search.disabled},borderColor:{type:String,default:e.search.borderColor},searchIconColor:{type:String,default:e.search.searchIconColor},color:{type:String,default:e.search.color},placeholderColor:{type:String,default:e.search.placeholderColor},searchIcon:{type:String,default:e.search.searchIcon},searchIconSize:{type:[Number,String],default:e.search.searchIconSize},margin:{type:String,default:e.search.margin},animation:{type:Boolean,default:e.search.animation},modelValue:{type:String,default:e.search.value},value:{type:String,default:e.search.value},maxlength:{type:[String,Number],default:e.search.maxlength},height:{type:[String,Number],default:e.search.height},label:{type:[String,Number,null],default:e.search.label}}}],data(){return{keyword:"",showClear:!1,show:!1,focused:this.focus}},watch:{keyword(e){this.$emit("update:modelValue",e),this.$emit("change",e)},modelValue:{immediate:!0,handler(e){this.keyword=e}}},computed:{showActionBtn(){return!this.animation&&this.showAction}},emits:["clear","search","custom","focus","blur","click","clickIcon","update:modelValue","change"],methods:{inputChange(e){this.keyword=e.detail.value},clear(){this.keyword="",this.$nextTick((()=>{this.$emit("clear")}))},search(e){this.$emit("search",e.detail.value);try{o()}catch(t){}},custom(){this.$emit("custom",this.keyword);try{o()}catch(e){}},getFocus(){this.focused=!0,this.animation&&this.showAction&&(this.show=!0),this.$emit("focus",this.keyword)},blur(){setTimeout((()=>{this.focused=!1}),100),this.show=!1,this.$emit("blur",this.keyword)},clickHandler(){this.disabled&&this.$emit("click")},clickIcon(){this.$emit("clickIcon")}}},[["render",function(e,t,a,o,b,k){const C=m,S=j(l("u-icon"),B),w=g,x=_;return s(),c(w,{class:"u-search",onClick:k.clickHandler,style:p([{margin:e.margin},e.$u.addStyle(e.customStyle)])},{default:r((()=>[n(w,{class:"u-search__content",style:p({backgroundColor:e.bgColor,borderRadius:"round"==e.shape?"100px":"4px",borderColor:e.borderColor})},{default:r((()=>[e.$slots.label||null!==e.label?i(e.$slots,"label",{key:0},(()=>[n(C,{class:"u-search__content__label"},{default:r((()=>[u(h(e.label),1)])),_:1})]),!0):d("",!0),n(w,{class:"u-search__content__icon"},{default:r((()=>[n(S,{onClick:k.clickIcon,size:e.searchIconSize,name:e.searchIcon,color:e.searchIconColor?e.searchIconColor:e.color},null,8,["onClick","size","name","color"])])),_:1}),n(x,{"confirm-type":"search",onBlur:k.blur,value:b.keyword,onConfirm:k.search,onInput:k.inputChange,disabled:e.disabled,onFocus:k.getFocus,focus:e.focus,maxlength:e.maxlength,"placeholder-class":"u-search__content__input--placeholder",placeholder:e.placeholder,"placeholder-style":`color: ${e.placeholderColor}`,class:"u-search__content__input",type:"text",style:p([{textAlign:e.inputAlign,color:e.color,backgroundColor:e.bgColor,height:e.$u.addUnit(e.height)},e.inputStyle])},null,8,["onBlur","value","onConfirm","onInput","disabled","onFocus","focus","maxlength","placeholder","placeholder-style","style"]),b.keyword&&e.clearabled&&b.focused?(s(),c(w,{key:1,class:"u-search__content__icon u-search__content__close",onClick:k.clear},{default:r((()=>[n(S,{name:"close",size:"11",color:"#ffffff",customStyle:"line-height: 12px"})])),_:1},8,["onClick"])):d("",!0)])),_:3},8,["style"]),n(C,{style:p([e.actionStyle]),class:f(["u-search__action",[(k.showActionBtn||b.show)&&"u-search__action--active"]]),onClick:y(k.custom,["stop","prevent"])},{default:r((()=>[u(h(e.actionText),1)])),_:1},8,["style","class","onClick"])])),_:3},8,["onClick","style"])}],["__scopeId","data-v-03662187"]]);var T=z({__name:"Search",setup(e){const t=b(""),a=k({data:[]});function o(){a.data=[];try{v("keyword_list")}catch(e){console.log("删除失败")}}function i(e){if(0!==e.trim().length){a.data.push(e),t.value="";try{$("keyword_list",JSON.stringify(a.data))}catch(o){console.log("搜索记录存储失败")}A({url:`/subPages/GoodsList/GoodsList?key=${e}`})}}return C((()=>{try{const e=S("keyword_list");e&&a.data.push(...JSON.parse(e))}catch(e){console.log(e)}})),(e,d)=>{const p=j(l("u-search"),N),f=g,y=j(l("uni-icons"),V),_=m;return s(),c(f,null,{default:r((()=>[n(p,{placeholder:"日照香炉生紫烟",modelValue:t.value,"onUpdate:modelValue":d[0]||(d[0]=e=>t.value=e),onCustom:i,bgColor:"white"},null,8,["modelValue"]),n(f,{class:"takes-notes-content"},{default:r((()=>[n(f,{class:"notes"},{default:r((()=>[n(f,null,{default:r((()=>[u("最近搜索")])),_:1}),n(y,{type:"trash-filled",size:"20",onClick:o})])),_:1}),n(f,{class:"notice-box"},{default:r((()=>[(s(!0),w(I,null,x(a.data,((e,t)=>(s(),c(_,{class:"notice-box-item",key:e+t,onClick:t=>function(e){A({url:`/subPages/GoodsList/GoodsList?key=${e}`})}(e)},{default:r((()=>[u(h(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-5f217c46"]]);export{T as default};
