import{_ as o,r as t,o as a,c as s,w as e,a as n,j as l,k as u,b as i,t as r,p as c,m as d,H as f,F as p,i as g,e as _,z as b,h as m,N as v,l as y,$ as C,n as x,a0 as h,f as k,S as w}from"./index.37bf5aad.js";import{_ as F}from"./uni-icons.a5cd0d6a.js";import{r as N,o as G}from"./uni-app.es.d259472c.js";import{_ as j}from"./u-empty.4b0d0214.js";import{_ as z}from"./plugin-vue_export-helper.21dcd24c.js";import{a as E}from"./u-modal.8a1fb3ad.js";import{u as $}from"./shopCar.c2d79220.js";import{u as B}from"./index.675729df.js";import"./u-icon.f076fea3.js";var H={en:{"uni-goods-nav.options.shop":"shop","uni-goods-nav.options.cart":"cart","uni-goods-nav.buttonGroup.addToCart":"add to cart","uni-goods-nav.buttonGroup.buyNow":"buy now"},"zh-Hans":{"uni-goods-nav.options.shop":"店铺","uni-goods-nav.options.cart":"购物车","uni-goods-nav.buttonGroup.addToCart":"加入购物车","uni-goods-nav.buttonGroup.buyNow":"立即购买"},"zh-Hant":{"uni-goods-nav.options.shop":"店鋪","uni-goods-nav.options.cart":"購物車","uni-goods-nav.buttonGroup.addToCart":"加入購物車","uni-goods-nav.buttonGroup.buyNow":"立即購買"}};const{t:A}=o(H);var I=z({name:"UniGoodsNav",emits:["click","buttonClick"],props:{options:{type:Array,default:()=>[{icon:"shop",text:A("uni-goods-nav.options.shop")},{icon:"cart",text:A("uni-goods-nav.options.cart")}]},buttonGroup:{type:Array,default:()=>[{text:A("uni-goods-nav.buttonGroup.addToCart"),backgroundColor:"linear-gradient(90deg, #FFCD1E, #FF8A18)",color:"#fff"},{text:A("uni-goods-nav.buttonGroup.buyNow"),backgroundColor:"linear-gradient(90deg, #FE6035, #EF1224)",color:"#fff"}]},fill:{type:Boolean,default:!1},stat:{type:Boolean,default:!1}},methods:{onClick(o,t){this.$emit("click",{index:o,content:t})},buttonClick(o,t){uni.report&&this.stat&&uni.report(t.text,t.text),this.$emit("buttonClick",{index:o,content:t})}}},[["render",function(o,b,m,v,y,C){const x=g,h=N(t("uni-icons"),F),k=_;return a(),s(x,{class:"uni-goods-nav"},{default:e((()=>[n(x,{class:"uni-tab__seat"}),n(x,{class:"uni-tab__cart-box flex"},{default:e((()=>[n(x,{class:"flex uni-tab__cart-sub-left"},{default:e((()=>[(a(!0),l(p,null,u(m.options,((o,t)=>(a(),s(x,{key:t,class:"flex uni-tab__cart-button-left uni-tab__shop-cart",onClick:a=>C.onClick(t,o)},{default:e((()=>[n(x,{class:"uni-tab__icon"},{default:e((()=>[n(h,{type:o.icon,size:"20",color:"#646566"},null,8,["type"])])),_:2},1024),n(k,{class:"uni-tab__text"},{default:e((()=>[i(r(o.text),1)])),_:2},1024),n(x,{class:"flex uni-tab__dot-box"},{default:e((()=>[o.info?(a(),s(k,{key:0,class:c([{"uni-tab__dots":o.info>9},"uni-tab__dot"]),style:d({backgroundColor:o.infoBackgroundColor?o.infoBackgroundColor:"#ff0000",color:o.infoColor?o.infoColor:"#fff"})},{default:e((()=>[i(r(o.info),1)])),_:2},1032,["class","style"])):f("",!0)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),n(x,{class:c([{"uni-tab__right":m.fill},"flex uni-tab__cart-sub-right"])},{default:e((()=>[(a(!0),l(p,null,u(m.buttonGroup,((o,t)=>(a(),s(x,{key:t,style:d({background:o.backgroundColor,color:o.color}),class:"flex uni-tab__cart-button-right",onClick:a=>C.buttonClick(t,o)},{default:e((()=>[n(k,{style:d({color:o.color}),class:"uni-tab__cart-button-right-text"},{default:e((()=>[i(r(o.text),1)])),_:2},1032,["style"])])),_:2},1032,["style","onClick"])))),128))])),_:1},8,["class"])])),_:1})])),_:1})}],["__scopeId","data-v-c3578306"]]);const T=[{text:"加入购物车",backgroundColor:"linear-gradient(90deg, #FFCD1E, #FF8A18)",color:"#fff"},{text:"立即购买",backgroundColor:"linear-gradient(90deg, #FE6035, #EF1224)",color:"#fff"}];var D=z({__name:"Details",setup(o){const c=b(!1),d=B(),f=$(),z=b({}),H=b(""),A=b();G((({id:o})=>{H.value=o,async function(o){const{data:t}=await uni.Http(`/goods/goodsMessage/${o}`,"get");z.value=t,A.value=z.value.images.map((o=>o.serverName+o.displayimg))}(o),D[1].info=f.countCarNumber}));const D=m([{icon:"home",text:"首页"},{icon:"cart",text:"购物车",info:""}]),q=m(T);function L({index:o}){v(0===o?{url:"/pages/index/index"}:{url:"/pages/shoppingCart/shoppingCart"})}function M(o,{index:t}){0===t?async function(){d.userInfo.uid?uni.Http(`/card/addCard/${d.userInfo.uid}/${H.value}`,"get").then((()=>{f.car.forEach((o=>{o.gid===Number(H.value)&&(o.goodscount++,D[1].info=f.countCarNumber)}))})):C({title:"请登录后，再购买！",icon:"error",complete(){x({url:"/subPages/Login/Login"})}})}():c.value=!c.value}return(o,d)=>{const f=k,b=g,m=w,v=y,C=N(t("uni-icons"),F),x=_,G=N(t("u-empty"),j),$=N(t("uni-goods-nav"),I),B=N(t("u-modal"),E);return a(),s(b,null,{default:e((()=>[n(v,{class:"swiper",circular:"","indicator-dots":"autoplay",autoplay:"",interval:3e3,duration:1e3},{default:e((()=>[(a(!0),l(p,null,u(z.value.images,((o,t)=>(a(),s(m,{key:o.iid,onClick:o=>function(o){h({current:o,urls:A.value})}(t)},{default:e((()=>[n(b,{class:"swiper-item uni-bg-red"},{default:e((()=>[n(f,{class:"swiper-image",src:o.serverName+o.displayimg,mode:"widthFix"},null,8,["src"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),n(b,{class:"goods-detail-content"},{default:e((()=>[n(b,{class:"goods-price-box"},{default:e((()=>[n(b,{class:"price"},{default:e((()=>[i(" ￥"+r(z.value.price),1)])),_:1}),n(b,{class:"sell"},{default:e((()=>[i(" 已售"+r(z.value.salesvolume)+"件 ",1)])),_:1})])),_:1}),n(b,{class:"goods-title-box"},{default:e((()=>[n(b,{class:"description"},{default:e((()=>[i(r(z.value.message),1)])),_:1}),n(b,{class:"goods-share"},{default:e((()=>[n(C,{type:"paperplane",size:"30"}),n(x,null,{default:e((()=>[i("分享")])),_:1})])),_:1})])),_:1})])),_:1}),n(b,{class:"select-content"},{default:e((()=>[n(b,{class:"select-left"},{default:e((()=>[n(b,null,{default:e((()=>[i("选择：")])),_:1}),n(b,null,{default:e((()=>[i("颜色")])),_:1})])),_:1}),n(b,{class:"select-right"},{default:e((()=>[n(C,{type:"forward",size:"15"})])),_:1})])),_:1}),n(b,{class:"shop-service"},{default:e((()=>[n(b,{class:"select-left"},{default:e((()=>[n(b,null,{default:e((()=>[n(x,{class:"iconfont icon-quangou"}),i("七天无理由退货 ")])),_:1}),n(b,null,{default:e((()=>[n(x,{class:"iconfont icon-quangou"}),i("20小时发货 ")])),_:1})])),_:1}),n(b,{class:"select-right"},{default:e((()=>[n(C,{type:"forward",size:"15"})])),_:1})])),_:1}),n(b,{class:"goods-description-box"},{default:e((()=>[n(b,{class:"good-title-detail"},{default:e((()=>[i("商品详情")])),_:1}),z.value.describeimgs&&z.value.describeimgs.length?(a(),s(b,{key:0},{default:e((()=>[(a(!0),l(p,null,u(z.value.describeimgs,((o,t)=>(a(),s(f,{class:"image-details-node",key:t,src:o.serverName+o.address},null,8,["src"])))),128))])),_:1})):(a(),s(b,{key:1},{default:e((()=>[n(G,{mode:"car",icon:"http://cdn.uviewui.com/uview/empty/d.png"})])),_:1}))])),_:1}),n(b,{class:"goods-carts"},{default:e((()=>[n($,{options:D,fill:!0,"button-group":q,onClick:L,onButtonClick:d[0]||(d[0]=o=>M(z.value,o))},null,8,["options","button-group"])])),_:1}),n(B,{show:c.value,title:"警告",content:"该网站为演示项目无法下单",onConfirm:d[1]||(d[1]=o=>c.value=!c.value)},null,8,["show"])])),_:1})}}},[["__scopeId","data-v-0afa88b8"]]);export{D as default};
